<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Le Voyage d'Orion &ndash; Visualiseur de cartes</title>
  <link rel="stylesheet" href="styles.css" />
  <script type="module" src="src/main.js" defer></script>
</head>

<body>
  <!-- Home Page -->
  <div id="home-page" class="home-page">
    <div class="home-content">
      <h1 class="home-title">Le Voyage d'Orion</h1>
      <button id="start-button" class="home-start-button" type="button">
        Commencer à jouer
      </button>
    </div>
  </div>

  <!-- Main App -->
  <header class="app-header">
    <div class="branding">
      <h1>Le Voyage d'Orion</h1>
      <p>Visualiseur de cartes</p>
    </div>
    <nav class="category-nav" aria-label="Navigation des catégories">
      <button type="button" class="nav-button" data-category="regles">
        Règles
      </button>
      <button type="button" class="nav-button" data-category="histoire">
        Histoires
      </button>
      <button type="button" class="nav-button" data-category="enigme">
        Énigmes
      </button>
      <button type="button" class="nav-button" data-category="encyclopedie">
        Encyclopédie
      </button>
      <button type="button" class="nav-button" data-category="indice">
        Indices
      </button>
      <button type="button" class="nav-button" data-category="carte">
        Carte du ciel
      </button>
      <button type="button" class="nav-button" data-category="epinglees">
        Épinglées
      </button>
      <button type="button" class="nav-button" data-category="solutions">
        Solutions
      </button>
    </nav>
  </header>

  <div class="app-shell">
    <aside id="sidebar" aria-label="Liste des cartes">
      <div class="sidebar-header">
        <h2>Cartes</h2>
        <p id="sidebar-subtitle"></p>
      </div>
      <ul id="cards-list"></ul>
      <p id="sidebar-empty" class="empty-state hidden">
        Aucune carte à afficher pour cette vue.
      </p>
    </aside>

    <main id="main-panel">
      <section id="cards-section" aria-live="polite">
        <div id="cards-container" class="cards-grid"></div>
        <p id="cards-empty" class="empty-state hidden">
          Pas de carte dans cette catégorie pour le moment.
        </p>
      </section>

      <section id="solutions-section" class="hidden" aria-live="polite">
        <div id="solutions-container"></div>
      </section>

      <section id="rules-section" class="hidden" aria-live="polite">
        <div id="rules-container">
          <!-- Interactive Book Viewer with integrated zoom (like sky map) -->
          <div class="rules-book-container">
            <!-- Stage with overflow hidden for zoom clipping -->
            <div class="rules-book-stage" id="rulesBookStage">
              <div class="rules-book-wrapper" id="rulesBookWrapper">
                <!-- Book Area -->
                <div class="rules-book-area" id="rulesBookArea">
                  <!-- Book Spine -->
                  <div class="rules-book-spine hidden" id="rulesBookSpine"></div>

                  <!-- Right side with flipping pages -->
                  <div class="rules-right-side cover-mode" id="rulesRightSide">
                    <!-- Page 0: Couverture -->
                    <div class="rules-page" data-page="0">
                      <div class="rules-page-front">
                        <img src="images/regles/couverture.svg" alt="Couverture des règles">
                      </div>
                      <div class="rules-page-back">
                        <img src="images/regles/neutral-page.svg" alt="Dos de page">
                      </div>
                    </div>

                    <!-- Page 1 -->
                    <div class="rules-page" data-page="1">
                      <div class="rules-page-front">
                        <img src="images/regles/page-1.svg" alt="Page 1">
                      </div>
                      <div class="rules-page-back">
                        <img src="images/regles/neutral-page.svg" alt="Dos de page">
                      </div>
                    </div>

                    <!-- Page 2 -->
                    <div class="rules-page" data-page="2">
                      <div class="rules-page-front">
                        <img src="images/regles/page-2.svg" alt="Page 2">
                      </div>
                      <div class="rules-page-back">
                        <img src="images/regles/neutral-page.svg" alt="Dos de page">
                      </div>
                    </div>

                    <!-- Page 3 -->
                    <div class="rules-page" data-page="3">
                      <div class="rules-page-front">
                        <img src="images/regles/page-3.svg" alt="Page 3">
                      </div>
                      <div class="rules-page-back">
                        <img src="images/regles/neutral-page.svg" alt="Dos de page">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Floating Zoom Controls (like sky map) -->
            <div class="rules-floating-controls">
              <button id="rulesZoomOut" type="button" aria-label="Zoom arrière" title="Dézoomer">
                &#8722;
              </button>
              <span id="rulesZoomDisplay" class="rules-zoom-percent">100%</span>
              <button id="rulesZoomReset" type="button" aria-label="Réinitialiser le zoom" title="Réinitialiser">
                &#10227;
              </button>
              <button id="rulesZoomIn" type="button" aria-label="Zoom avant" title="Zoomer">
                &#43;
              </button>
              <button id="rulesFullscreenToggle" type="button" aria-label="Plein écran" title="Plein écran">
                &#9633;
              </button>
            </div>

            <!-- Navigation Controls -->
            <div class="rules-controls">
              <button class="rules-nav-btn" id="rulesPrevBtn" disabled type="button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M15 18l-6-6 6-6"/>
                </svg>
                Précédent
              </button>

              <span class="rules-page-indicator" id="rulesPageIndicator">Couverture</span>

              <button class="rules-nav-btn" id="rulesNextBtn" type="button">
                Suivant
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </button>
            </div>

            <!-- Thumbnails -->
            <div class="rules-thumbnails">
              <div class="rules-thumbnail-wrapper">
                <div class="rules-thumbnail active" data-goto="0">
                  <img src="images/regles/couverture.svg" alt="Couverture">
                </div>
                <div class="rules-thumbnail-label">Couverture</div>
              </div>
              <div class="rules-thumbnail-wrapper">
                <div class="rules-thumbnail" data-goto="1">
                  <img src="images/regles/page-1.svg" alt="Page 1">
                </div>
                <div class="rules-thumbnail-label">Page 1</div>
              </div>
              <div class="rules-thumbnail-wrapper">
                <div class="rules-thumbnail" data-goto="2">
                  <img src="images/regles/page-2.svg" alt="Page 2">
                </div>
                <div class="rules-thumbnail-label">Page 2</div>
              </div>
              <div class="rules-thumbnail-wrapper">
                <div class="rules-thumbnail" data-goto="3">
                  <img src="images/regles/page-3.svg" alt="Page 3">
                </div>
                <div class="rules-thumbnail-label">Page 3</div>
              </div>
            </div>

            <p class="rules-instructions">
              Utilisez la molette ou les boutons pour zoomer, double-cliquez pour agrandir<br>
              <small>Cliquez sur les flèches ou utilisez ← → au clavier pour naviguer même en mode zoom</small>
            </p>
          </div>
        </div>

        <!-- Fullscreen exit button -->
        <button id="rulesFullscreenExit" class="rules-fullscreen-exit hidden" type="button" aria-label="Quitter le plein écran">
          &#10005;
        </button>
      </section>

      <section id="sky-map-section" class="hidden" aria-label="Carte du ciel interactive">
        <div class="sky-map-controls">
          <h2>Carte du ciel</h2>
          <p>Zoom à la molette, cliquer-glisser pour explorer.</p>
        </div>
        <div id="sky-map-stage">
          <img id="sky-map-image" src="images/cartes/Carte_du_ciel.svg" alt="Carte du ciel du Voyage d'Orion"
            draggable="false" />
        </div>
        <div class="sky-map-floating-controls">
          <button id="zoom-out" type="button" aria-label="Zoom arrière">
            &#8722;
          </button>
          <button id="zoom-reset" type="button" aria-label="Recentrer">
            &#10227;
          </button>
          <button id="zoom-in" type="button" aria-label="Zoom avant">
            &#43;
          </button>
          <button id="sky-fullscreen-toggle" type="button" aria-label="Plein écran">
            &#9633;
          </button>
        </div>
        <button id="sky-fullscreen-exit" class="sky-fullscreen-exit hidden" type="button"
          aria-label="Quitter le plein écran">
          &#10005;
        </button>
      </section>
    </main>
  </div>

  <button id="cards-back-to-top" class="back-to-top-btn hidden" type="button" aria-label="Remonter en haut de la page"
    title="Haut de page">
    &#8593;
  </button>

  <div id="inspection-overlay" class="hidden" role="dialog" aria-modal="true" aria-label="Visualisation de carte">
    <div class="inspection-shell">
      <div class="inspection-floating-controls">
        <button id="inspection-pin" class="icon-button" type="button" aria-label="Epingler cette carte"
          title="Epingler"></button>
        <button id="close-inspection" class="icon-button" type="button" aria-label="Fermer l'inspection" title="Fermer">
          &times;
        </button>
      </div>
      <div id="inspection-stage" class="inspection-stage" aria-live="polite" aria-label="Visualisation 3D de la carte">
        <div id="inspection-card" class="inspection-card">
          <div class="inspection-card-face face-front">
            <img id="inspection-image-front" alt="" draggable="false" />
          </div>
          <div class="inspection-card-face face-back">
            <img id="inspection-image-back" alt="" draggable="false" />
          </div>
        </div>
      </div>
      <div class="inspection-actions">
        <button id="inspection-flip" type="button" aria-label="Retourner la carte" title="Retourner"></button>
      </div>
    </div>
  </div>
</body>

</html>